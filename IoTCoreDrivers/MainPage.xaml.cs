//*************************************************************************************************
// DEBUT DU FICHIER
//*************************************************************************************************

//*************************************************************************************************
// Nom         : MainPage.cs
// Auteur      : Nicolas Dagnas
// Description : Implémentation de l'objets MainPage
// Créé le     : 27/08/2017
// Modifié le  : 27/08/2017
//*************************************************************************************************

//-------------------------------------------------------------------------------------------------
#region Using directives
//-------------------------------------------------------------------------------------------------
using System;
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
using Windows.Devices.Gpio;
using Windows.Devices.Media;
using Windows.UI.Xaml.Controls;
//-------------------------------------------------------------------------------------------------
#endregion
//-------------------------------------------------------------------------------------------------

//*************************************************************************************************
// Début du bloc "IoTCoreDrivers"
//*************************************************************************************************
namespace IoTCoreDrivers
	{

	//  #   #   ###   #  #   #       ####    ###    ###    #####
	//  ## ##  #   #  #  ##  #       #   #  #   #  #   #   #
	//  # # #  #####  #  # # #  ###  ####   #####  #       ###
	//  #   #  #   #  #  #  ##       #      #   #  #   ##  #
	//  #   #  #   #  #  #   #       #      #   #   ### #  #####

	//*********************************************************************************************
	// Classe MainPage
	//*********************************************************************************************
	#region // Déclaration et Implémentation de l'Objet
	//---------------------------------------------------------------------------------------------
	/// <summary>
	/// 
	/// </summary>
	//---------------------------------------------------------------------------------------------
	public sealed partial class MainPage : Page
		{
		public MainPage()
			{
			this.InitializeComponent();

			this.InitDrivers ();
			}

		private async void InitDrivers ()
			{
			await Ds3231 .Initialize (    );
			await Tsl2561.Initialize (    );
			await Buzzer .Initialize ( 17 );
			await Ssd1308.Initialize (    );

			// Get DateTime in Ds3231, auto net sync
			DateTime LocalDateTime = Ds3231.Now;
			double   Temperature   = Ds3231.Temperature;

			// Get luminosity
			double Luminosity  = Tsl2561.Lux;

			// Buzzz
			Buzzer.Tone ( 1400, 800, 200 );

			// Draw Frame
			Ssd1308.DrawHLine (   0,  0, 128 );
			Ssd1308.DrawVLine (   0,  0, 64  );
			Ssd1308.DrawVLine ( 127,  0, 64  );
			Ssd1308.DrawHLine (   0, 63, 128 );
			
			Ssd1308.DrawChar ( 'M', DisplayFonts.System7pt,  87,  3 );
			Ssd1308.DrawChar ( 'A', DisplayFonts.System7pt,  97,  3 );
			Ssd1308.DrawChar ( 'N', DisplayFonts.System7pt, 107,  3 );
			Ssd1308.DrawChar ( 'U', DisplayFonts.System7pt, 117,  3 );
			}
		}
	//---------------------------------------------------------------------------------------------
	#endregion
	//*********************************************************************************************

	} // Fin du namespace "RFXManager"
//*************************************************************************************************

//*************************************************************************************************
// FIN DU FICHIER
//*************************************************************************************************
